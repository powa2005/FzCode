<!DOCTYPE html>
<html>
<head>
	<title>svg-progress</title>
	<style type="text/css">
  html,body{width: 100%;height: 100%;}
		
    .circle{
      stroke-dasharray: 4px; 
      stroke-dashoffset: 100px; 
    }
	</style>
</head>

<body>
	<div style="padding:100px;width:100%;height:100%;background:#333;">


		<svg version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
          <ellipse id="path-11" cx="50" cy="50" rx="50" ry="50"></ellipse>
          <linearGradient x1="0%" y1="100%" x2="100%" y2="27.2516694%" id="linearGradient-31"> <stop stop-color="#FFE3AF" offset="0%"></stop> <stop stop-color="#FF8C08" offset="100%"></stop> </linearGradient>
          <g id="peak-pt">
            <circle r="6" fill=""></circle>
            <circle r="4" fill="#000"></circle>
          </g>
      </defs>
      <g id="svg-content">
      </g>


    </svg>
    <br>
    <input id="input_p" type="text" />
  <input type="button" value="set"  id="btn_set"/>
    <br>
  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="300">
      <g id="pieGroup">
      </g>
    </svg>
  <br>
<input id="input_p2" type="text" />
  <input type="button" value="set"  id="btn_set2"/>
  <br>
  



























    <!-- ---------------------------------- 这里定义好svg-------------------------------------------------- -->
    <svg width="375px" height="244px" viewBox="0 0 375 244"  xmlns="http://www.w3.org/2000/svg">
    <defs>
        <linearGradient x1="61.0720144%" y1="90.8603232%" x2="40.194056%" y2="20.8782126%" id="linearGradient-1">
            <stop stop-color="#212121" offset="0%"></stop>
            <stop stop-color="#252525" offset="100%"></stop>
        </linearGradient>
        <rect id="path-2" x="0" y="0" width="388" height="204"></rect>
        <filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="filter-3">
            <feOffset dx="0" dy="6" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="10" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.204313859 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-4">
            <stop stop-color="#252525" offset="0%"></stop>
            <stop stop-color="#9B9B9B" offset="100%"></stop>
        </linearGradient>
        <g id="svg-bg" transform="translate(0.000000, 26.000000)">
            <g transform="translate(9.000000, 204.000000)" font-size="14" font-family=".PingFang-SC-Regular, .PingFang SC" fill="#888888" font-weight="normal">
                <g id="日">
                    <text>
                        <tspan x="0" y="15">1</tspan>
                    </text>
                </g>
                <g transform="translate(105.000000, 0.000000)" id="日">
                    <text>
                        <tspan x="0" y="15">10</tspan>
                    </text>
                </g>
                <g transform="translate(218.000000, 0.000000)" id="日">
                    <text>
                        <tspan x="0" y="15">20</tspan>
                    </text>
                </g>
                <g transform="translate(332.000000, 0.000000)" id="日">
                    <text>
                        <tspan x="0" y="15">30</tspan>
                    </text>
                </g>
            </g>
            <g id="Rectangle">
                <use fill="black" fill-opacity="1" filter="url(#filter-3)" xlink:href="#path-2"></use>
                <use fill="url(#linearGradient-1)" fill-rule="evenodd" xlink:href="#path-2"></use>
            </g>
            <g opacity="0.5" fill="url(#linearGradient-4)">
                <g>
                    <rect opacity="0.300000012" x="0" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="15" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="30" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="45" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="60" y="0" width="1" height="204"></rect>
                </g>
                <g transform="translate(56.857143, 0.000000)">
                    <rect opacity="0.300000012" x="0" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="15" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="30" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="45" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="60" y="0" width="1" height="204"></rect>
                </g>
                <g transform="translate(114.000000, 0.000000)">
                    <rect opacity="0.300000012" x="0" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="15" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="30" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="45" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="60" y="0" width="1" height="204"></rect>
                </g>
                <g transform="translate(170.571429, 0.000000)">
                    <rect opacity="0.300000012" x="0" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="15" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="30" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="45" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="60" y="0" width="1" height="204"></rect>
                </g>
                <g transform="translate(227.000000, 0.000000)">
                    <rect opacity="0.300000012" x="0" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="15" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="30" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="45" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="60" y="0" width="1" height="204"></rect>
                </g>
                <g transform="translate(284.285714, 0.000000)">
                    <rect opacity="0.300000012" x="0" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="15" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="30" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="45" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="60" y="0" width="1" height="204"></rect>
                </g>
                <g transform="translate(341.000000, 0.000000)">
                    <rect opacity="0.300000012" x="0" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="15" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="30" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="45" y="0" width="1" height="204"></rect>
                    <rect opacity="0.100000001" x="60" y="0" width="1" height="204"></rect>
                </g>
            </g>
        </g>
    </defs>
</svg>











<!-- ---------------------------------- 这里的div进行引用 1 -------------------------------------------------- -->
<div id="test-div" style="position:relative;height:500px;">
    <div id="svgbgtest1"></div>
    <div style="width:100%;height:100%;position:relative;color:#fff;top:30px;left:0;z-index:2">拉法垃圾fid骚囧厄齐峰</div>


</div>



<!-- ---------------------------------- 这里的div进行引用 2 -------------------------------------------------- -->
<div id="test-div2" style="position:relative;height:500px;">
    <div id="svgbgtest2"></div>
    <div style="width:100%;height:100%;position:relative;color:#fff;top:30px;left:0;z-index:2">凡达范德萨非亲非故如果对方是个</div>


</div>
<script type="text/javascript">
  var svgBg = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="300" style="position:absolute;top:0;left:0;z-index:1;"><use xlink:href="#svg-bg" x="1" y="1" fill="#FFE3AF" /></svg>';
  document.getElementById('svgbgtest1').innerHTML = svgBg;
  document.getElementById('svgbgtest2').innerHTML = svgBg;
</script>










</div>


	<script type="text/javascript">
  function createPie(id){
      return '<g id="'+ id +'">'+
      '<path class="pie-main" fill="url(#linearGradient-31)" fill-opacity="1" />'+
      '<path class="circle" stroke="#fff" fill-opacity="0"  />'+
      '</g>';
  }

  function createProgress(id, r, startX, startY, endX, endY){
      return '<g id="'+ id +'">'+
      '<path class="circle" d="M '+ startX +' '+ startY +' A '+ r +' '+ r +' 0 0 0 '+ endX +' '+ endY +'" stroke="#fff" fill-opacity="0" />'+
      '<use xlink:href="#peak-pt" x="'+ startX +'" y="'+ startY +'" fill="#FF8C08" />'+
      '<path class="path-pg" stroke-width="12" stroke="url(#linearGradient-31)" fill-opacity="0" />'+
      '<use xlink:href="#peak-pt" x="'+ endX +'" y="'+ endY +'" fill="#FFE3AF" />'+
      '<use class="end-point" xlink:href="#peak-pt" fill="#FF8C08" />'+
      '</g>';
  }

  function setProgress(id, startX, startY, r, deg, clockwise){
    var pathObj = document.querySelector('#' + id + ' .path-pg');
    var endPt = document.querySelector('#' + id + ' .end-point');

    var cw = typeof clockwise !== 'undefined' ? clockwise : 1;
    deg = 180 - deg;
    var x = startX + r + r*Math.cos(deg*Math.PI/180);
    var y = startY - (1===cw ? 1 : -1)*r*Math.sin(deg*Math.PI/180);
    var bigOrSmall = deg > 180 ? 1 : 0;
    // var line = " L" + (startX - r) + " " + startY + " L"+startX + " " + startY + "Z";
    var d = "M " + startX +" "+ startY + " A "+ r +" " + r + " 0 " + bigOrSmall + " " +cw+ " " + x + " " + y;

    endPt.setAttribute("x", x);
    endPt.setAttribute("y", y);
    pathObj.setAttribute('d', d);
  }
  function setPie(id, startX, startY, r, deg, clockwise){
    var pathObj = document.querySelector('#' + id + ' .pie-main');
    var pathObj2 = document.querySelector('#' + id + ' .circle');

    var cw = typeof clockwise !== 'undefined' ? clockwise : 1;
    
    var x = startX - r + r*Math.cos(deg*Math.PI/180);
    var y = startY + (1===cw ? 1 : -1)*r*Math.sin(deg*Math.PI/180);
    var bigOrSmall = deg > 180 ? 1 : 0;
    var line = " L" + (startX - r) + " " + startY + " L" + startX + " " + startY + "Z";
    var d = "M " + startX +" "+ startY + " A "+ r +" " + r + " 0 " + bigOrSmall + " " +cw+ " " + x + " " + y + " " + line;
    pathObj.setAttribute('d', d);



    var bigOrSmall2 = bigOrSmall == 0 ? 1 : 0;
    var line2 = " L" + (startX - r) + " " + startY + " L" + startX + " " + startY + "Z";
    var d2 = "M " + startX +" "+ startY + " A "+ r +" " + r + " 0 " + bigOrSmall2 + " " + 0 + " " + x + " " + y + " " + line2;

    pathObj2.setAttribute('d', d2);

    var smallDeg = deg / 2 + 180;
    var startXSmall = startX - 70;
    var xinX = startXSmall - 10 + 10*Math.cos(smallDeg*Math.PI/180);
    var xinY = startY + (1===cw ? 1 : -1) * 10 * Math.sin(smallDeg*Math.PI/180);
    
    var xMinus = xinX - startX + r;
    var yMinus = xinY - startY;
    pathObj2.setAttribute('transform', 'translate('+xMinus+', '+yMinus+')');
  }


  window.onload = function(){
    var path1 = createProgress('path1', 50, 200, 100, 100, 100);
    var path2 = createProgress('path2', 80, 240, 100, 60, 100);
    document.getElementById('svg-content').innerHTML = path1 + path2;
    setProgress('path1', 100,100,50, 100, 1)
    setProgress('path2', 60,100,90, 100, 1)
    
    document.getElementById('btn_set').onclick = function(){
      var val = document.getElementById('input_p').value;
      setProgress('path1', 100,100,50, val, 1)
      setProgress('path2', 60,100,90, val, 1)
      
    }




    document.getElementById('pieGroup').innerHTML = createPie('bodypie');
    setPie('bodypie', 200,120,80, 309, 1);
    document.getElementById('btn_set2').onclick = function(){
      var val = document.getElementById('input_p2').value;
      setPie('bodypie', 200,120,80, val, 1)
      
    }
  };


</script>
</body>
</html>