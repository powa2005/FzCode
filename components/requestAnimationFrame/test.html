<!DOCTYPE html>
<html>
<head>
	<title>requestAnimationFrame-Demo</title>
	<meta charset='utf-8'/>
	<style type="text/css">
		#scrollDiv{width: 300px; height: 25px; line-height: 25px; border: #ccc 1px solid; overflow: hidden;}
	</style>
</head>
<body>
	<div id="scrollDiv">
	  <ul style="margin-top: 0px;">
	  	<li>这是公告标题的第一行</li>
	  	<li>这是公告标题的第二行</li>
	  	<li>这是公告标题的第三行</li>
	  	<li>这是公告标题的第四行</li>
	  	<li>这是公告标题的第五行</li>
	  	<li>这是公告标题的第六行</li>
	  	<li>这是公告标题的第七行</li>
	  	<li>这是公告标题的第八行</li>
	  </ul>
	</div>

	<script type="text/javascript" src="requestAnimationFrame.js"></script>
	<script type="text/javascript">
		// var obj = document.querySelector('#scrollDiv ul');
		// function rander(){
		// 	var t = obj.style.marginTop.replace('px','');
		// 	var val = parseInt(t) - 1
		//     obj.style.marginTop = val + 'px'; //每一帧向右移动1px
		// }
		// requestAnimationFrame(function(){

		//     rander();
		//     if(obj.style.marginTop == '-25px'){
		//     	var liArray = document.querySelectorAll('#scrollDiv ul li');
		// 	    var firstLi = liArray[0];
		// 	    obj.style.marginTop = '0px';
		// 	    obj.removeChild(firstLi);
		// 	    obj.appendChild(firstLi);
		//     }
		    
		//     requestAnimationFrame(arguments.callee);
		// });
		var obj = document.querySelector('#scrollDiv ul');
		function rander(){
			var animate = setInterval(function(){
				var t = obj.style.marginTop.replace('px','');
				if(t == -25){
					var liArray = document.querySelectorAll('#scrollDiv ul li');
				    var firstLi = liArray[0];
				    t = 0;
				    obj.removeChild(firstLi);
				    obj.appendChild(firstLi);
				    window.clearInterval(animate);
				    setTimeout(rander,1500);
				}
				var val = parseInt(t) - 1
			    obj.style.marginTop = val + 'px'; 
			},25)
			
		}
		rander();
		//setInterval(rander,1000)
	</script>
</body>
</html>